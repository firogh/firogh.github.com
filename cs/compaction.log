# Memory compaction: 
[firo-must and youtube: The hard work behind large physical memory allocations in the kernel](https://linuxplumbersconf.org/event/2/contributions/65/attachments/15/171/slides-expanded.pdf)
[if buddy algorithm failed to allocate large memory, it will trigger memory compaction. Check /proc/buddyinfo; /proc/sys/vm/extfrag_threshold  compact 0 < > 1000 swap old page](https://lwn.net/Articles/591998/)
[Memory compaction](https://lwn.net/Articles/368869/)
https://lwn.net/Articles/591998/
https://kernelnewbies.org/Linux_2_6_35#Memory_compaction

# ETC
MIGRATE_HIGHATOMIC

# Anti fragmentation
[The What, The Why and the Where To of Anti-Fragmentation](https://www.kernel.org/doc/ols/2006/ols2006v1-pages-369-384.pdf)
PLKA - 3.5.2
mobility
[Split the free lists for movable and unmovable allocations] - b2a0ac8875a0a3b9f0739b60526f8c5977d2200f
## MIGRATE_RECLAIMABLE? 
commit e12ba74d8ff3e2f73a583500d7095e406df4d093
Refs: v2.6.23-4359-ge12ba74d8ff3
Author:     Mel Gorman <mel@csn.ul.ie>
AuthorDate: Tue Oct 16 01:25:52 2007 -0700
Commit:     Linus Torvalds <torvalds@woody.linux-foundation.org>
CommitDate: Tue Oct 16 09:43:00 2007 -0700
    Group short-lived and reclaimable kernel allocations

[treewide: remove GFP_TEMPORARY allocation flag](https://lore.kernel.org/patchwork/patch/814997/)

## fallbacks?
        [MIGRATE_UNMOVABLE]   = { MIGRATE_RECLAIMABLE, MIGRATE_MOVABLE,   MIGRATE_TYPES },
        [MIGRATE_RECLAIMABLE] = { MIGRATE_UNMOVABLE,   MIGRATE_MOVABLE,   MIGRATE_TYPES },
        [MIGRATE_MOVABLE]     = { MIGRATE_RECLAIMABLE, MIGRATE_UNMOVABLE, MIGRATE_TYPES },
find_suitable_fallback

/proc/vmstat
pgsteal_kswapd 0
pgsteal_direct 0

vm_event_item PGSTEAL_KSWAPD

set_pageblock_migratetype

# Pages can be isolated and migrated
Pages on LRU lists
Pages marked with PageMovable “flag”
Currently just zsmalloc (used by zram and zswap) and virtio balloon pages
[Making kernel pages movable](https://lwn.net/Articles/650917/)
