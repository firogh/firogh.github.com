<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="cs, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="The programming language : firoyang.org"/>
<meta property="og:site_name" content="Firo Website"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://firoyang.org/cs/pl/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2015-02-27"/>
<meta property="article:modified_time" content="2015-02-27"/>


<meta property="article:tag" content="cs">





    <base href="http://firoyang.org/">
    <title> The programming language</title>
    <link rel="canonical" href="http://firoyang.org/cs/pl/">
    

    
<link rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/static/css/style.css">


    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
     
</head>


<body lang="en" itemscope itemtype="http://schema.org/Article">
<header id="header">
	<link rel="stylesheet" href="static/css/font-awesome.min.css">
	<nav id="nav">
	<div id="title"><a href="/">Firo Notes</a></div>


	<div>
	
	</div>
	</nav>
	<nav id="nav">
    	        <ul id="mainnav">
            <li>
            <a href="/review/">
                <span class="icon"> <i aria-hidden="false" class="fa fa-thumbs-o-up"></i></span>
                <span> review</span>
            </a>
            </li>
            <li>
            <a href="/firo/">
                <span class="icon"> <i aria-hidden="true" class="fa fa-male"></i></span>
                <span> firo </span>
            </a>
            </li>
            <li>
            <a href="/history/">
                <span class="icon"> <i aria-hidden="false" class="fa fa-institution"></i></span>
                <span> history </span>
            </a>
            </li>
            <li>
            <a href="/about">
                <span class="icon"> <i aria-hidden="true" class="fa fa-rocket"></i></span>
                <span> Firo </span>
            </a>
            </li>
            <li>
                <a href="/howto/">
                <span class="icon"> <i aria-hidden="true" class="fa fa-gamepad"></i></span>
                <span> howto </span>
            </a>
            </li>
            <li>
            <a href="/kernel/">
                <span class="icon"> <i aria-hidden="true" class="fa fa-linux"></i></span>
                <span> kernel </span>
            </a>
            </li>
            <li>
            <a href="/net/">
                <span class="icon"> <i aria-hidden="true" class="fa fa-globe"></i></span>
                <span> net </span>
            </a>
            </li>
            <li>
            <a href="/philosophy/">
                <span class="icon"> <i aria-hidden="true" class="icon-leaf"></i></span>
                <span> philosophy </span>
            </a>
            </li>

            <li>
                <a href="/lyubishchev/">
                <span class="icon"> <i aria-hidden="true" class="fa fa-hourglass-half"></i></span>
                <span> lyubishchev </span>
            </a>
            </li>
            <li>
                <a href="/cs/">
                <span class="icon"> <i aria-hidden="true" class="fa fa-laptop"></i></span>
                <span> cs </span>
            </a>
            </li>
	    <li>
                <a href="/linguistics/">
                <span class="icon"> <i aria-hidden="true" class="fa fa-language"></i></span>
                <span> linguistics </span>
            </a>
            </li>
        </ul>

	</nav>
	<nav id="nav">
       
	</nav>
</header>



 <link rel="stylesheet" href="highlight.js/styles/monokai-sublime.css">
    <script src="highlight.js/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
	<section id="main">
	  <h1 itemprop="name" >The programming language</h1>
	  

<aside id="meta">

    <div>
        <section id="datecount">
          <h4 id="date"> Fri Feb 27, 2015 </h4>
          
        </section>
        
        <ul id="tags">
          
            <li> <a href="http://firoyang.org//tags/cs">cs</a> </li>
          
        </ul>

    </div>


</aside>

<meta itemprop="wordCount" content="1627">
<meta itemprop="datePublished" content="2015-02-27">
<meta itemprop="url" content="http://firoyang.org/cs/pl/">


	  <div>
		<article itemprop="articleBody" id="content">
		   

<p><a href="http://www.yinwang.org/blog-cn/2016/03/31/no-longer-pl">我为什么不再做PL人</a></p>

<p>∅ ⊢ pl<br />
scope: The set of expressions for which a binding defines a name is called the scope of that name.</p>

<h1 id="reference">Reference</h1>

<p><a href="http://www.zhihu.com/question/21843639">http://www.zhihu.com/question/21843639</a><br />
貌似正则是type 3, c是type2, 范式角度我现在不好理解, 缺乏语言学的知识.<br />
Programming Language Pragmatics 3rd<br />
C11<br />
C Traps and Pitfalls<br />
Expert C Programming</p>

<h1 id="contents">Contents</h1>

<p>Programming language theory<br />
Programming language</p>

<h1 id="programming-language-theory">Programming language theory</h1>

<p>What is formal language and the relationg between fl and pl?<br />
Language primitive</p>

<h2 id="semantics">Semantics</h2>

<h1 id="c">C</h1>

<p>我们还是从使用的角度来看c 语言;<br />
c语言自身重要基础性质, 我们需要了解.<br />
除此之外, 我们还要了解一些重要的标准库函数.<br />
知道这些, 我们就能用c语言.</p>

<h2 id="type">Type</h2>

<ul>
<li>Object type and function type<br /></li>
<li>Object &ndash; void, scalar,aggregate types, composite<br /></li>
<li>Scalar type &ndash; Arithmetic types and pointer types<br />
<a href="http://www.techopedia.com/definition/16441/scalar">What does Scalar mean?</a><br />
scalar 词源上由scale演化而来, scalar type来自scalar processor and vector processor.<br />
超标量也是来自这里concurrent SISD =&gt;MIMD 所谓的流水线.<br /></li>

<li><p>Arithmetic type &ndash; Integer and floating types</p>

<h2 id="incomplete-and-complete">Incomplete and complete</h2>

<p>void; struct s; union u;</p>

<h2 id="conversion">Conversion</h2></li>

<li><p>only effect to scalar type data<br />
error: conversion to non-scalar type requested</p></li>

<li><p>无符号数 转换成upper rank的有符号数, 还是无符号数, 不管最初是-1!<br />
unsigned int i = 1; long f = -10;if ( i &gt; f ) printf(&ldquo;ok\n&rdquo;); true 证明确实usigned 向long转换了.<br />
unsigned int i = -3; long f = -5u;if ( i &gt; f ) printf(&ldquo;ok\n&rdquo;); true<br />
c11上是ok的!</p></li>

<li><p>做signed 和unsigned 貌似both convert to unsigned gcc才给警告, 否则不给即便是signed和unsigned比较.</p>

<h2 id="lvalue-rvalue-modfiable-rvalue">lvalue rvalue modfiable rvalue</h2>

<p><a href="http://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c">Understanding lvalues and rvalues in C and C++</a><br />
If a variable/expression  has a address, it&rsquo;s of lvalue.</p>

<h2 id="array-decay">Array decay</h2>

<p>数组退化的初衷, 可能是K&amp;R当年计算资源紧缺, 导致不允许函数传值copy数组内容.<br />
总之标准委员会介入之前就决定.<br />
<a href="http://bbs.chinaunix.net/thread-1031622-1-1.html">[C] [原创]数组与指针&mdash;都是&rdquo;退化&rdquo;惹的祸</a><br />
关于char *s错误声明的讲解不错!<br />
<a href="http://stackoverflow.com/questions/17752978/exception-to-array-not-decaying-into-a-pointer">Exception to array not decaying into a pointer?</a><br />
在c11 6.3.2.1 Lvalues, arrays, and function designators第3点说明了<br />
array不会退化的4种场景. Except when it is</p></li>

<li><p>the operand of the sizeof operator,</p></li>

<li><p>the _Alignof operator, or the</p></li>

<li><p>unary &amp; operator, or</p></li>

<li><p>is a string literal used to initialize an array, an expression that has type<br />
‘‘array of type’’ is converted to an expression with type ‘‘pointer to type’’<br />
that points to the initial element of the array object and is not an lvalue.<br />
If the array object has register storage class, the behavior is undefined.<br />
这4种场景之外, 那么array名退化的结果是pointer.<br />
这个pointer和我们最常用的pointer如int *p有什么区别呢?<br />
首先array decay是type上的转化array -&gt; pointer.<br />
其次数组名原来是lvalue -&gt; not an lvalue更谈不上modifiable.<br />
type: tyepof(array[0]) *<br />
value: &amp;array[0] or array<br />
property: not lvalue<br />
当然这只是c11上的说明, 我们只要明白为什么不能修改一个decay数组名就行了.<br />
实现的个人猜测是: 根据lvalue的定义decay后数组名还是lvalue, 只不过一直都不是modifiable.</p></li>

<li><p>为什么作为函数形参的数组名可以++, 而作为变量的数组名就不可以.<br />
因为形参数组名被当初pointer处理modifiable lvalue, 而实参数组名只是传值而已.<br />
而普通数组名是一个lvalue,不能修改.</p>

<h3 id="why-innermost-dimension-can-be-omit-in-array">Why innermost dimension can be omit in array</h3>

<p>用不到.<br />
In essence, all arrays in C are one-dimensional.</p></li>
</ul>

<p>Because the array will decay to pointer and to calculate offset to<br />
the elements of the array you do not need to know the innermost dimension.</p>

<p>Compiler has to know by how much to increment the pointer when<br />
indexing on the first dimension for example. So if an int array is named a,</p>

<h2 id="integer-promotion">Integer Promotion</h2>

<p><a href="http://www.idryman.org/blog/2012/11/21/integer-promotion/">Deep C: Integer Promotion</a><br />
* <a href="https://msdn.microsoft.com/en-us/library/fc9te331.aspx">Integral Promotions</a><br />
0xF int<br />
0xFFFFFFFF unsigned int</p>

<h2 id="scopes-of-identifiers">Scopes of identifiers</h2>

<p>For each different entity that an identifier designates, the identifier is visible (i.e., can be<br />
used) only within a region of program text called its scope.<br />
* four kinds of scopes: function, file, block, and function prototype<br />
If the declarator or type specifier that declares the identifier<br />
appears outside of any block or list of parameters, the identifier has file scope, which<br />
terminates at the end of the translation unit.</p>

<p>If the declarator or type specifier that<br />
declares the identifier appears inside a block or within the list of parameter declarations in<br />
a function definition, the identifier has block scope, which terminates at the end of the<br />
associated block.</p>

<p>If the declarator or type specifier that declares the identifier appears<br />
within the list of parameter declarations in a function prototype (not part of a function<br />
definition), the identifier has function prototype scope, which terminates at the end of the<br />
function declarator.</p>

<p>If an identifier designates two different entities in the same name<br />
space, the scopes might overlap.</p>

<h2 id="linkages-of-identifiers">linkages of identifiers</h2>

<p>An identifier declared in different scopes or in the same scope more than once can be<br />
made to refer to the same object or function by a process called linkage.<br />
* There are three kinds of linkage: external, internal, and none.<br />
* There is no linkage between different identifiers.<br />
* external linkage<br />
In the set of translation units and libraries that constitutes an entire program, each<br />
declaration of a particular identifier with external linkage denotes the same object or<br />
function. &ndash;c11</p>

<p>If the name has external linkage,<br />
the entity that name denotes may be referred to from another translation unit<br />
using a distinct declaration for that same name,<br />
and from other scopes within the same translation unit using distinct declarations. &ndash;wikipedia<br />
* Internal linkage<br />
Within one translation unit, each declaration of an identifier with internal<br />
linkage denotes the same object or function. &ndash;c11</p>

<p>Were the name given internal linkage,<br />
such a declaration would denote a distinct entity, although using the same name,<br />
but its entity could be referred to by distinct declarations within the same translation unit.  &ndash;wikipedia<br />
* No linkage<br />
Each declaration of an identifier with no linkage denotes a unique entity. &ndash;c11<br />
A name that has no linkage at all cannot be referred to from declarations in different scopes,<br />
not even from within the same translation unit. &ndash;wikipedia</p>

<h2 id="name-spaces-of-identifiers">Name spaces of identifiers</h2>

<h2 id="storage-durations-of-objects">Storage durations of objects</h2>

<p>An object has a storage duration that determines its lifetime.<br />
There are four storage durations: static, thread, automatic, and allocated.<br />
The lifetime of an object is the portion of program execution during which storage is<br />
guaranteed to be reserved for it.<br />
In book 21st Century C, it was named memory mode.<br />
* static storage duration<br />
An object whose identifier is declared without the storage-class specifier _Thread_local,<br />
and either with external or internal linkage or with the storage-class specifier static(for no linkage &ndash;firo),<br />
has static storage duration.</p>

<p>Its lifetime is the entire execution of the program and its stored value is initialized only once,<br />
prior to program startup.<br />
* automatic storage duration<br />
An object whose identifier is declared with no linkage and without the storage-class<br />
specifier static has automatic storage duration, as do some compound literals.<br />
* alloced storage duration<br />
The lifetime of an allocated object extends from the allocation until the deallocation.<br />
* Thread storage duration<br />
details in c11</p>

<h2 id="alignment-of-objects">Alignment of objects</h2>

<p>An alignment is an implementation-defined integer value representing the number of bytes between<br />
successive addresses at which a given object can be allocated.<br />
More deatils in cs.md</p>

<h2 id="declarations">Declarations</h2>

<p>A declaration specifies the interpretation and attributes of a set of identifiers.<br />
A definition of an identifier is a declaration for that identifier that:<br />
for an object, causes storage to be reserved for that object;<br />
for a function, includes the function body;<br />
for an enumeration constant, is the (only) declaration of the identifier;<br />
for a typedef name, is the first (or only) declaration of the identifier.<br />
The declaration specifiers consist of a sequence of specifiers that indicate the linkage,<br />
storage duration, and part of the type of the entities that the declarators denote.</p>

<h2 id="marco">Marco</h2>

<p><a href="http://blog.csdn.net/huyansoft/article/details/2484297">如果#操作符出现在对象宏的替换列表中,则仅作为一个普通字符,不具有下述含义</a></p>

<h2 id="expressions">Expressions</h2>

<ul>
<li><p>cast<br />
A cast does not yield an lvalue.</p>

<h2 id="lexical-element">Lexical element</h2>

<h3 id="character-constants">Character constants</h3>

<p>An integer character constant has type int.</p>

<h2 id="lexical-pitfall">lexical pitfall</h2>

<h2 id="greedy-lexical-analysis">Greedy lexical analysis</h2></li>

<li><p>Write tokens with blank!<br />
x = y/<em>p;  /</em> oops, hidden error.*/</p></li>

<li><p>Associative<br />
You donot need to remember it! Just use it!</p></li>

<li><p>Precedence<br />
Need to remember, but if you not sure, parenthess.</p>

<h2 id="inline-和宏的区别">inline 和宏的区别</h2>

<p>inline的好处与坏处<br />
没有调用的开销效率很高, 但是调试代码复杂了, 内链函数的实现是拷贝副本消耗内存.<br />
inline有类型检测, 宏没有.</p>

<h2 id="c-standard-library">C standard library</h2>

<h2 id="faq">FAQ</h2></li>

<li><p>Logical operation with signed value? x86!<br />
int c = 0xFFFFFFFF;  int d = c &gt;&gt; 31; =&gt; d == f;<br />
unsigned c = 0xFFFFFFFF;  int d = c &gt;&gt; 31; d!= f;</p></li>

<li><p>shift beyond bits long?<br />
c &gt;&gt; 296 == c &gt;&gt; 8</p></li>

<li><p>变量同名不同类型不同文件, 通过extern, 否则就是multiple definition<br />
这是c语言最为迷糊的地方.简单说来类似union, 具体我也不清楚.</p></li>

<li><p>所有名字引用同一个object</p></li>

<li><p>不同文件中不同类型的sizeof和当前文件类型一直.</p></li>
</ul>

<h1 id="c-standard-library-1">C standard library</h1>

<p>NULL?</p>

<h2 id="string-handling">String handling</h2>

<p>kernel/lib/string.c<br />
* Copying functions<br />
memcpy: dest<br />
memmove: dest<br />
strcpy: dest, 拷贝\0<br />
strncpy: dest, if src_len &gt;= n; 0 NULL, if src _len &lt; n; (n - len) NULL;<br />
strlcpy: src_len, mini(n -1, src_len -1) + \0, src_len 用你返回啊!<br />
* Concatenation functions<br />
strcat: dest, overwrite dest \0 with src util src \0<br />
strncat: dest, 末尾一定有\0<br />
* Comparison functions<br />
memcmp: 差值,<br />
strcmp: -1, 0, 1, 如果整个s1都比完了NULL or &ndash;n ==0 for strncmp, return 0<br />
* Search functions<br />
memchr, NULL or p;<br />
strchr,ditto, 到\0返回NUll<br />
strrchr,ditto, last occurence.<br />
strspn: s1开始有多少在s2中.<br />
strcspn: s1开始有多少不在s2中.<br />
strpbrk: s2中第一次出现的位置<br />
strstr: 找子串, 用memcmp</p>

<h1 id="asm-in-c-code">ASM in c code</h1>

<p>c语言嵌入汇编这不是c语言的特性是编译器的feature.<br />
<a href="https://gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.html#Using-Assembly-Language-with-C">How to Use Inline Assembly Language in C Code</a><br />
#MIPS<br />
bdi 4, 8 delay solt<br />
mips instruction size is fixed, 32bit, 4byte.<br />
instruction address:  instrction in hex formate    instruction in string formate, 260<br />
8002c28c:   8c440104    lw  a0,260(v0)<br />
##ASM codes Fixme<br />
move &lt;-<br />
j long jump<br />
b short jump<br />
a0, a1&hellip;99% is parameters.<br />
##lwr &amp; lwl<br />
load a word<br />
different with endianess<br />
register 63&hellip;..32&hellip;&hellip;0<br />
big endian: lwl high bits in b + 0<br />
little endian: lwl high in b + off<br />
向中心</p>

<h1 id="x86">x86</h1>

<p><a href="http://heather.cs.ucdavis.edu/~matloff/50/PLN/lock.pdf">Intel’s ‘cmpxchg’ instruction</a><br />
eax: e stand for 32<br />
rax: r stand for 64<br />
<a href="http://x86.renejeschke.de/html/file_module_x86_id_159.html">lock prefix in x86</a><br />
the lock prefix make instruction atomic!</p>

<h2 id="registers-purpose">registers&rsquo; purpose</h2>

<h2 id="register">Register</h2>

<ul>
<li>gs<br />
The linux kernel uses GS to access cpu-specific memory.<br /></li>
<li>gdtr<br />
GDT<br /></li>

<li><p>tr<br />
TSS addressing<br />
#Wildcards<br />
<a href="http://whatis.techtarget.com/definition/wildcard-character">A wildcard character is a type of meta character</a><br />
##Type</p>

<h3 id="standard-wildcards-globbing-patterns">Standard Wildcards (globbing patterns)</h3>

<p>File and directory patterns<br />
?: must stand for a character</p></li>

<li><p>Regular expression</p></li>

<li><p>SQL<br />
#Shell</p>

<h2 id="test">test</h2>

<h3 id="n-is-not-equivalent-to-z">-n is not equivalent to ! -z</h3>

<p>Be caution! just juse -z and !-z</p>

<h2 id="ls">ls</h2>

<p>-l: show hardlinks of file/dir in 2nd column<br />
drwsrwsr-T: T stand for sticky bit no other execution bit<br />
##eval</p></li>

<li><p>create variable name<br />
<strong>var=&ldquo;name&rdquo;<br />
eval &ldquo;export &ndash; \&ldquo;$</strong>var=firo\&ldquo;&rdquo;<br />
set | grep firo<br />
__var=&lsquo;name&rsquo;<br />
bbb=&lsquo;firo&rsquo;<br />
##expr<br />
expr &ldquo;$name&rdquo; : &lsquo;(.*).conf&rsquo;<br />
##find</p></li>

<li><p>find symbols in object<br />
find . -name &lsquo;a.out&rsquo; -exec nm -D {} \; -print<br />
find . -name &lsquo;*.o&rsquo; -print0 | xargs -0 nm -A | egrep &lsquo; (i|y)$&rsquo;</p></li>

<li><p>rm<br />
find . -name ‘your_pattern*’ -exec rm -f {} \;<br />
find . -name ‘your_pattern*’ -delete</p>

<h2 id="grep">grep</h2>

<p>-c: count of match<br />
##pipe<br />
find . -type d | while read d; do cnt=$(ls $d | grep tgz | wc -l); echo &ldquo;$cnt $d&rdquo;; done | sort -n &gt;stat<br />
#AWK<br />
netstat -n | awk &lsquo;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&rsquo;</p></li>
</ul>

		</article>
	  </div>
	</section>

<aside id=comments>
    <div><h2> Comments </h2></div>
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'firoyang';
    var disqus_identifier = 'http:\/\/firoyang.org\/cs\/pl\/';
    var disqus_title = 'The programming language';
    var disqus_url = 'http:\/\/firoyang.org\/cs\/pl\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>

<footer>
  <div>
    <p>
    &copy; 2014 ~ 2016 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Firo Yang </span></span><a href="http://creativecommons.org/licenses/by/4.0/">Some rights reserved</a>. 
	Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://fortawesome.github.io/Font-Awesome/">Font Awesome</a>.
        Theme by <a href="http://spf13.com">Steve Francia <a href="http://firoyang.org">Firo Yang</a>.
    </p>
  </div>
</footer>
<script type="text/javascript">
(function(){var j=function(a,b){return window.getComputedStyle?getComputedStyle(a).getPropertyValue(b):a.currentStyle[b]};var k=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent('on'+b,c)};var l=function(a,b){for(key in b)if(b.hasOwnProperty(key))a[key]=b[key];return a};window.fitText=function(d,e,f){var g=l({'minFontSize':-1/0,'maxFontSize':1/0},f);var h=function(a){var b=e||1;var c=function(){a.style.fontSize=Math.max(Math.min(a.clientWidth/(b*10),parseFloat(g.maxFontSize)),parseFloat(g.minFontSize))+'px'};c();k(window,'resize',c)};if(d.length)for(var i=0;i<d.length;i++)h(d[i]);else h(d);return d}})();
fitText(document.getElementById('title'), 1)
</script>




</body>
</html>


<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

</body>
