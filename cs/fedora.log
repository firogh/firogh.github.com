# top
---
tags: [ cs ] 
title: Fedora distro 物语
date: 2015-02-27T15:46:11+08:00 
category: cs
---

# Initial
gsettings set org.gnome.shell.app-switcher current-workspace-only true

## Not sure
unset command_not_found_handle



# proxy
https://hitun.io/user/shop
curl -Ls https://install.direct/go.sh | sudo bash

# docker
ocker run -i -t --rm=true -v /buildarea1/firo/bd:/mnt pek-lpdfs01:5000/centos7_64:wrl /bin/bash

# fonts
https://copr.fedorainfracloud.org/coprs/chenxiaolong/ubuntu-fonts/

# initrd
/usr/lib/dracut/skipcpio
/usr/lib/dracut/skipcpio $your-img | gunzip -c | cpio -id

# rpm
## identify the rpm version that built the package
rpm -qp --qf '%{rpmversion}\n' xxx.rpm
rpm5 -qp --yaml xxx.rpm | grep Rpmversion

# redhat subscription
https://www.reddit.com/r/sysadmin/comments/5136ty/anyone_has_access_to_redhats_knowledgebase/
LifeProTip: go to http://developers.redhat.com/downloads/ and start downloading RedHat Enterprise Linux. It will ask you to Register for a free RedHat Developers Account.
It's totally free and as a side effect gives you access to the RedHat support forums. You don't even have to finish the download.

# ssh
## ssh tunnel
windows:
ssh -vvv -fNR 2222:127.0.0.1:22 root@138.128.195.217 -p 29781
autossh -M 20000 -fNR 2222:localhost:22 root@138.128.195.217 -p 29781
VPS:
ssh -fN -g -L 138.128.195.217:2223:localhost:2222 root@localhost -p 29781
Linux:
ssh  -v yongmiya@138.128.195.217 -p 2223

# systemd
 sudo systemd-analyze  blame 
      2min 732ms systemd-udev-settle.service
           732ms dracut-initqueue.service
           541ms abrtd.service
systemctl mask systemd-udev-settle
Created symlink /etc/systemd/system/systemd-udev-settle.service → /dev/null.

# sudoer doesn't work?
https://askubuntu.com/questions/504652/adding-nopasswd-in-etc-sudoers-doesnt-work/504666#504666

# Bash
PS1='\e[1;32m\u@\h\e[m:\e[1;34m\w\e[m$ '
stty columns 3000
setterm -linewrap off
resize in xterm

rsz() {
	if [[ -t 0 && $# -eq 0 ]];then
		local IFS='[;' escape geometry x y
		printf -n '\e7\e[r\e[999;999H\e[6n\e8'
		read -sd R escape geometry
		x=${geometry##*;} y=${geometry%%;*}
		if [[ ${COLUMNS} -eq ${x} && ${LINES} -eq ${y} ]];then
			print "${TERM} ${x}x${y}"
		else
			print "${COLUMNS}x${LINES} -> ${x}x${y}"
			stty cols ${x} rows ${y}
		fi
	else
		[[ -n ${commands[repo-elephant]} ]] && repo-elephant || print 'Usage: rsz'  ## Easter egg here :)
	fi
}
## input comand line wraps
http://shallowsky.com/blog/tags/embedded/
resize
xterm-resize-330-3.fc27.x86_64
/etc/profile
PS1='[\[\033[0;32m\]\u@\h:\[\033[36m\]\W\[\033[0m\]]\$ '


# Android
sudo adb shell "settings put global captive_portal_server www.google.cn"
Privoxy
# Git
git log --oneline   --reverse --ancestry-path 3be4beaf7c91ec9c6fefa5f11173af37113d10ae~10..master

# mp3
ls * | while read line; do new=${line//-/_};echo $new;mv $line $new; done
ls * | while read line; do echo $line;m=${line%%".mp3"}; ffmpeg    -i ./"$line" -shortest -b 1000k -acodec copy "$m".mp4;done
ls  | while read line; do echo $line;m=${line%%".mp3"}; echo $line;echo "ffmpeg    -i ./"$line" -shortest -b 1000k -acodec copy "$m".mp4" >>m.sh;done


#Nautilus
* Sidebar
Edit below file to rename dir in place menu of sidebar.
vim ~/.config/user-dirs.dirs

# vim
/usr/share/vim/vim82/autoload/netrw.vim
   if !hasmapto('<Plug>NetrwRefresh')           |nmap <buffer> <silent> <nowait> <c-l>   <Plug>NetrwRefresh|endif

#xdg 
* Specification
http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html

#Raspberry pi
* Remote viewer
vinagre


#fedora 22
* Check dup and error
yum check

* touchpad single tap-to-click and single finger scrolling
synclient TapButton1=1 TapButton2=3 TapButton3=2
synclient VertEdgeScroll=25 HorizEdgeScroll=25

/etc/udev/rules.d/10-trackpoint.rules
ACTION=="add",
SUBSYSTEM=="input",
ATTR{name}=="TPPS/2 IBM TrackPoint",
ATTR{device/sensitivity}="190",
ATTR{device/speed}="270",
ATTR{device/inertia}="6",
ATTR{device/press_to_select}="1"

* after distro-sync 22 yum/dnf still recognize 21
yum check must output fedor-relase/repos-21 something like, remove it.

* tty loop login
disable selinux
authconfig update all

* kernel parameter
audit=0 selinux=0  
rhgb  redaht graphical boot, show picture
quiet: show little message
init=/bin/bash

* boot stop at update UTMP
disable NetworkManager

#dropbear
=generate private key
dropbearkey -t rsa -f ~/.ssh/id_rsa.db
=yank public key
dropbearkey -y -f ~/.ssh/id_rsa.db
=login in
dbclient -y -i ~/.ssh/id_rsa.db user@ip
=trans file
scp -S dbclient -i ~/.ssh/id_rsa fileName user@ip:/dir

# gpg
6A6608B8
#id3tag
id3tag -2 *.mp3
for file in *.mp3;do f=$(echo "$file" |awk -F ' ' '{print $2}' | awk -F '.' '{print $1}'); id3tag -s "$f" "$file";  done
exiftool -json Baccano\!\ 永生之酒\(バッカーノ！\)\ ORIGINAL\ SOUNDTRACK\ SPIRAL\ MELODIES/12.緩みきった官能のダンス.mp3

#indent
indent -npro -kr -i8 -ts8 -sob -l80 -ss -ncs *.c *.h

# input method
How to disable the emoji suggestions? https://github.com/libpinyin/ibus-libpinyin/issues/164
dconf write /com/github/libpinyin/ibus-libpinyin/libpinyin/emoji-candidate false

# ps
ps -eLo pid,tid,s,eip,esp,stackp,tty4,etime,comm,wchan
ps -Llefmj or ps -Llef or ps -Lef

#qemu
qemu -m 512 -kernel bzImage -append “root=/dev/sda” -boot c -hda busybox.img -k en-us

#rdesktop
rdesktop -K -g 1366x700 -r clipboard:PRIMARYCLIPBOARD 192.168.10.200 -r sound:local -u firo -p ""
rdesktop -K -g 1366x700 -r clipboard:CLIPBOAD 192.168.10.200
nmap  -sP 192.168.10.0/24  | grep 'Nmap scan' | awk '{print$5}' | while read line; do echo "connect to $line";  timeout -s 9 2 rdesktop -K -g 1366x700 -r clipboard:CLIPBOARD $line; done

# sed
cat foreach_net-s | sed -e '/./{H;$!d;}' -e 'x;/127.0.0.1-.*127.0.0.1/!d;' | grep '^PID\|^FD\|127.0.0.1-.*127.0.0.1'
foreach net | sed -e '/./{H;$!d;}' -e 'x;/127.0.0.1-.*127.0.0.1/!d;'

s/^.*root=\([^ ]*\).*/\1/ /proc/cmdline
sed -E 's/[[:space:]]*\.{2,}[^0-9]*/\//g'
sed  -Ei 's/^date: ([0-9]{4}-[0-9]{2}-[0-9]{2}) ([0-9]{2}:[0-9]{2}:[0-9]{2})/date: \1T\2+08:00 /'


sed -ne '/./{H;d}' -e 'x;p' -e 'x'  skt.log
cat skt.log
#Linux
        Administration
        Scripting
        Tips and Tricks

#Windows
        Administration

#Database
        Mysql
        Oracle
        Queries
        Procedures

sed ':a;N;$!ba;s/\n/ /g' s.log
cat s.log 
aaa quiet bbb quiet

aaa
quiet \naaa

# wget
wget -r -np -R "index.html*"  https://concord.suse.cloud/cases/00203912/

# Weechat
/server add suse-de irc.suse.de/6697 -ssl
/set irc.server.suse-de.ssl_verify off
/set irc.server.suse-de.autoconnect on
/set irc.server.suse-de.username firo
/set irc.server.suse-de.realname Firo.Yang
/connect suse-de
/set irc.server.suse-de.autojoin #suse-labs,#sdi
/set irc.server.suse-de.autojoin #suse-labs,#sdi,#bsc1175738
/join #sdi
/quit
Swith among channels: ctrl-p, ctrl-n
https://wiki.suse.net/index.php?title=SUSE-Development/OPS/Services/IRC_and_ssl&redirect=no
## Notification
https://blog.petrzemek.net/2015/08/08/a-new-notification-plugin-for-weechat/

# Game
cd /home/firo/.local/share/Steam/steamapps/common/Divinity\ Original\ Sin\ Enhanced\ Edition/
allow_glsl_extension_directive_midshader=true LD_PRELOAD="divos-hack.so" ./runner.sh
https://steamcommunity.com/app/373420/discussions/0/451848854988674764/?ctp=3

# Disable discrete GPU
https://www.suse.com/documentation/sles-12/book_sle_admin/data/sec_mod_modprobe.html

# vlc
zypper in gstreamer-plugins-vaapi # hx264
## "mp4a" (MPEG AAC Audio)

# ypcat -k auto.mounts

# z website and Hugo
[A workaround for using markdown instead of index.html as homepage](https://www.crossplatform.net/hugo/article/writing-homepage-in-markdown/)
## Fastly error: unknown domain 
dnspod.cn
Updte @ and www to latest
185.199.109.153
185.199.110.153
185.199.111.153
https://help.github.com/en/articles/setting-up-an-apex-domain
## HTTPS
https://help.github.com/en/articles/securing-your-github-pages-site-with-https


# zypper
zypper install --download-only sssd=1.16.1-7.5.1
rpm -qp --changelog /var/cache/zypp/packages/SUSE_Linux_Enterprise_Server_12_SP5_x86_64:SLES12-SP5-Updates/x86_64/sssd-1.16.1-7.5.1.x86_64.rpm|grep -B3 1072728
zypper install --type=srcpackage --download-only sssd=1.16.1-7.5.1
rpm -qlp /var/cache/zypp/packages/SUSE_Linux_Enterprise_Server_12_SP5_x86_64:SLES12-SP5-Updates/src/sssd-1.16.1-7.5.1.src.rpm|grep speci
